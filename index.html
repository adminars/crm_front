<html>
<head>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
    
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>    
</head>
    
<body>
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
<div class="modal-dialog modal-sm">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Modal Header</h4>
    </div>
    <div class="modal-body">
      <p>メッセージ
          <input type="text" name="message" value=""/>
      </p>
      <p>user_id
          <input type="text" name="user_id" value="" readonly/>
      </p>
      <p>custom
          <input type="text" name="custom" value=""/>
      </p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal" id="dialog_data_send">送信</button>
    </div>
  </div>
</div>
</div>
    
<script id="artistsTemplate" type="text/x-jquery-tmpl">    
    <tr>
        <td>${created_at}</td>
        <td>${id}</td>
        <td>${user_id}</td>
        <td>${received_time}</td>
        <td>${message}</td>
        <td>${ankennId}</td>
        <td>
            {{if (status == "1")}}既に登録済みです。
            {{else}}<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Small Modal</button>                   
            {{/if}}
        </td>
    </tr>
</script>

<table id="table_id" class="display" style="display: none">
    <thead>
        <tr>
            <th>created_at</th>
            <th>id</th>
            <th>user_id</th>
            <th>received_time</th>
            <th>message</th>
            <th>ankennId</th>
            <th>status</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

</body>
<script>
//var a = "getlineeventlog";
var a = "getchatworkeventlog";    
</script>    
<script type="text/javascript" src="test.js"></script>    
<script> 
/*    
$(document).ready(function(){
    $.ajax({
      url: 'https://kurapitalcrmwebhook.tk/api/v1/getlineeventlog',
      type: 'GET',
      data: {
      },
      dataType: 'html'
    }).done(function( data1, textStatus, jqXHR ) {
        var jsondata = JSON.parse(data1);
        console.log(jsondata.data);
        $("#artistsContent").empty();
        $("#artistsTemplate").tmpl( jsondata.data ).appendTo("#table_id").find("tbody");
        
        $('#table_id').DataTable({
            searching: false,
            "aLengthMenu": [ 10, 25, 50, 100, 200 ]
        });
        
        $('#table_id').css("display","block");
        
        $('#myModal').on('shown.bs.modal', function (event) {
            $('[name="message"]').val($(event.relatedTarget).parent().parent().find("td:eq(4)").html());
            $('[name="user_id"]').val($(event.relatedTarget).parent().parent().find("td:eq(2)").html());
        });
        $('#myModal').on('hidden.bs.modal', function () {
            $('[name="message"]').val("");
            $('[name="user_id"]').val("");
        });
        
        $("#dialog_data_send").click(function(e){
            //https://kurapitalcrmwebhook.tk/api/v1/lineRequest
            alert("send");
            e.stopImmediatePropagation();
        });
        
      //成功
    }).fail(function( jqXHR, textStatus, errorThrown) {
        console.log(textStatus);
      //失敗
    }).always(function( jqXHR, textStatus) {
      //通信完了
        console.log(textStatus);
    });    
});
*/    
</script>    
</html>